
pipeline{
    agent any


    stages{

       stage("build image"){
        steps{
            script{
                withDockerRegistry(credentialsId: 'docker_ID') {
                    
            sh "docker build -t jesusgeo/static_app:${BUILD_ID}.0.0 ."
            // sh "docker tag static_app:latest jesusgeo/static_app:latest"
            
            
                }
            }
        
        }
       }

       stage("push image"){
        steps{
            sh "docker push jesusgeo/static_app:${BUILD_ID}.0.0"
            sh "docker rmi jesusgeo/static_app:${BUILD_ID}.0.0"
        }
       }
    }
   
}